{"ast":null,"code":"import React from'react';import{randomN}from'./Tools';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Item=function Item(props){props=props.props;var board=props.board;function dragStartHandler(e,board,item){props.setCurrentBoard(board);props.setCureentItem(item);}function dragOverHandler(e){e.preventDefault();if(e.target.classList.contains(\"item\")){e.target.style.boxShadow='0 15px 3px #f30ee5 ';}}function dragLeaveHandler(e){e.target.style.boxShadow='none';}function dragEndHandler(e){e.target.style.boxShadow='none';}function dropHandler(e,board,item){e.preventDefault();e.stopPropagation();// индекс карточки которую держим\nvar currentIndex=props.currentBoard.items.indexOf(props.cureentItem);props.currentBoard.items.splice(currentIndex,1);//индекс карточки над которой держим \nvar dropIndex=board.items.indexOf(item);board.items.splice(dropIndex+1,0,props.cureentItem);board.items.map(function(item){return item.id=randomN();});props.setBoards(props.boards.map(function(b){if(b.id===board.id){return board;}if(b.id===props.currentBoard.id){return props.currentBoard;}return b;}));e.target.style.boxShadow='none';}function delTodo(board,item){//индекс удаленного дела\nvar todoIndex=board.items.indexOf(item);board.items.splice(todoIndex,1);// board.items.map(item => item)\n// console.log(board);\n// console.log(props.boards);\nvar freshBoards=props.boards.slice();console.log(freshBoards);props.setBoards(freshBoards);// let data = JSON.stringify(props.boards);\n// localStorage.setItem('boards', data);\n}return board.items.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"alert alert-dismissible alert-secondary item\",draggable:true,onDragStart:function onDragStart(e){dragStartHandler(e,board,item);},onDragOver:function onDragOver(e){dragOverHandler(e);},onDragLeave:function onDragLeave(e){dragLeaveHandler(e);},onDragEnd:function onDragEnd(e){dragEndHandler(e);},onDrop:function onDrop(e){dropHandler(e,board,item);},children:[item.title,/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"delTodo btn btn-danger\",onClick:function onClick(e){return delTodo(board,item);},children:\"X\"})]},index+'i');});};export default Item;","map":{"version":3,"names":["React","randomN","Item","props","board","dragStartHandler","e","item","setCurrentBoard","setCureentItem","dragOverHandler","preventDefault","target","classList","contains","style","boxShadow","dragLeaveHandler","dragEndHandler","dropHandler","stopPropagation","currentIndex","currentBoard","items","indexOf","cureentItem","splice","dropIndex","map","id","setBoards","boards","b","delTodo","todoIndex","freshBoards","slice","console","log","index","title"],"sources":["C:/Users/Yura/Documents/GitHub/DragDrop/src/AddMyTrello/Item.jsx"],"sourcesContent":["import React from 'react'\r\nimport { randomN } from './Tools'\r\n\r\nconst Item = (props) => {\r\n\r\n    props = props.props\r\n    let board = props.board\r\n\r\n    function dragStartHandler(e, board, item) {\r\n        props.setCurrentBoard(board)\r\n        props.setCureentItem(item)\r\n    }\r\n\r\n    function dragOverHandler(e) {\r\n        e.preventDefault()\r\n        if (e.target.classList.contains(\"item\")) {\r\n            e.target.style.boxShadow = '0 15px 3px #f30ee5 '\r\n        }\r\n    }\r\n\r\n    function dragLeaveHandler(e) {\r\n        e.target.style.boxShadow = 'none'\r\n    }\r\n\r\n    function dragEndHandler(e) {\r\n        e.target.style.boxShadow = 'none'\r\n    }\r\n\r\n    function dropHandler(e, board, item) {\r\n        e.preventDefault()\r\n        e.stopPropagation()\r\n        // индекс карточки которую держим\r\n        const currentIndex = props.currentBoard.items.indexOf(props.cureentItem)\r\n        props.currentBoard.items.splice(currentIndex, 1)\r\n\r\n        //индекс карточки над которой держим \r\n        const dropIndex = board.items.indexOf(item)\r\n\r\n        board.items.splice(dropIndex + 1, 0, props.cureentItem)\r\n\r\n        board.items.map(item => item.id = randomN())\r\n\r\n        props.setBoards(props.boards.map(b => {\r\n            if (b.id === board.id) {\r\n                return board\r\n            }\r\n            if (b.id === props.currentBoard.id) {\r\n                return props.currentBoard\r\n            }\r\n            return b\r\n        }\r\n        ))\r\n        e.target.style.boxShadow = 'none'\r\n    }\r\n\r\n    function delTodo(board, item) {\r\n\r\n        //индекс удаленного дела\r\n        const todoIndex = board.items.indexOf(item)\r\n        board.items.splice(todoIndex, 1)\r\n\r\n        // board.items.map(item => item)\r\n        // console.log(board);\r\n        // console.log(props.boards);\r\n\r\n        let freshBoards = props.boards.slice()\r\n        console.log(freshBoards);\r\n        props.setBoards(freshBoards)\r\n\r\n        // let data = JSON.stringify(props.boards);\r\n        // localStorage.setItem('boards', data);\r\n    }\r\n\r\n    return (\r\n        board.items.map((item, index) =>\r\n\r\n            <div className=\"alert alert-dismissible alert-secondary item\"\r\n                key={index + 'i'}\r\n                draggable={true}\r\n                onDragStart={(e) => { dragStartHandler(e, board, item) }}\r\n                onDragOver={(e) => { dragOverHandler(e) }}\r\n                onDragLeave={(e) => { dragLeaveHandler(e) }}\r\n                onDragEnd={(e) => { dragEndHandler(e) }}\r\n                onDrop={(e) => { dropHandler(e, board, item) }}>\r\n                {item.title}\r\n                <button type=\"button\" className=\"delTodo btn btn-danger\"\r\n                    onClick={(e) => delTodo(board, item)}>X</button>\r\n            </div>\r\n        )\r\n    )\r\n}\r\n\r\nexport default Item"],"mappings":"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"},"metadata":{},"sourceType":"module"}